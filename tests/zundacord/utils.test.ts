import { expect, test } from "@jest/globals"
import { getReadableString } from "../../src/zundacord/utils"


test.each([
    // in, expected
    ["", ""],
    ["ã¯ã‚ãƒ¼ ğŸ¤”", "ã¯ã‚ãƒ¼"],
    ["ã¯ã‚ãƒ¼ <:hello:1234567890>", "ã¯ã‚ãƒ¼"],
    ["ã¯ã‚ãƒ¼ ã‚ã«ã‚ãƒ¼ã—ã‚‡ã‚“ <a:hello:1234567890>", "ã¯ã‚ãƒ¼ ã‚ã«ã‚ãƒ¼ã—ã‚‡ã‚“"],
    ["ğŸ˜ğŸ˜ğŸ˜’ ã¯ã‚ãƒ¼ <:hello:1234567890> <:hello:1234567890> <:hello:1234567890>", "ã¯ã‚ãƒ¼"],
    ["<:hello:1234567890> ğŸ˜ <:hello:1234567890> ã¯ã‚ãƒ¼ ğŸ¤” <:hello:1234567890> ğŸ¤”", "ã¯ã‚ãƒ¼"],
    ["12345ã¯ã‚ãƒ¼54321", "12345ã¯ã‚ãƒ¼54321"],
    ["ãƒ—ãƒ­ãƒ­ã®ã‚­ãƒ¬è‰¯ã—ï¼Ÿ", "ãƒ—ãƒ­ãƒ­ã®ã‚­ãƒ¬è‰¯ã—ï¼Ÿ"],
    ["ãƒ—ãƒ­ãƒ­ã®ã‚­ãƒ¬è‰¯ã—!?", "ãƒ—ãƒ­ãƒ­ã®ã‚­ãƒ¬è‰¯ã—ï¼ï¼Ÿ"], // this is converted by wanakana's `toKana`
    ["ã³ã˜ã£ã¨ https://sarisia.cc", "ã³ã˜ã£ã¨ ãƒªãƒ³ã‚¯"],
    ["ã³ã˜ã£ã¨ http://sarisia.cc", "ã³ã˜ã£ã¨ ãƒªãƒ³ã‚¯"],
    ["ã³ã˜ã£ã¨ http://sarisia.cc http://sarisia.cc", "ã³ã˜ã£ã¨ ãƒªãƒ³ã‚¯ ãƒªãƒ³ã‚¯"],
    ["ã³ã˜ã£ã¨ http://sarisia.cc\nhttp://sarisia.cc", "ã³ã˜ã£ã¨ ãƒªãƒ³ã‚¯ ãƒªãƒ³ã‚¯"],
    ["ã‹ãªã‚Š\r\nã¹ã‚Šãƒ¼\nãµãã™ã¨", "ã‹ãªã‚Š ã¹ã‚Šãƒ¼ ãµãã™ã¨"],
    // test `ï½` -> `ãƒ¼`
    ["å•œã‚‹ï½ï½ï½", "å•œã‚‹ãƒ¼ãƒ¼ãƒ¼"],
    // wanakana tests
    ["wanakana", "ã‚ãªã‹ãª"],
    ["wanakana ã¯ã‚ãƒ¼ ğŸ˜ğŸ˜ğŸ˜’ <a:hello:1234567890>", "ã‚ãªã‹ãª ã¯ã‚ãƒ¼"],
])("getReadableString(%s)", (str, expected) => {
    expect(getReadableString(str)).toBe(expected)
})
